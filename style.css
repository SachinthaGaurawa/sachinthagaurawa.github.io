/* ==========================================================
   GLOBAL TOKENS (base defaults – overridden by .is-light/.is-dark)
   ========================================================== */
:root{
  --bg:#ffffff;
  --ink:#0e0f11;
  --muted:#6e7481;
  --ring:rgba(4,112,255,.25);

  /* surfaces */
  --card:#ffffff;
  --card-2:#f3f6fb;
  --hair:#e7ecf4;

  /* album-specific */
  --album-canvas:#0b0d12;   /* overlay page background */
  --album-ink:#eaf0ff;      /* overlay base text */
  --album-muted:#a9b4c7;
  --album-border:#161a20;

  /* viewer overlay backdrop */
  --veil: rgba(0,0,0,.75);

  /* focus */
  --focus-ring: 0 0 0 4px rgba(120,170,255,.18);
}

/* ==========================================================
   THEME (apply site-wide by toggling .is-light / .is-dark on <body>)
   ========================================================== */
body.is-light{
  --bg:#f7f9fc;
  --ink:#0e0f11;
  --muted:#6e7481;
  --ring:rgba(4,112,255,.22);

  --card:#ffffff;
  --card-2:#f3f6fb;
  --hair:#e7ecf4;

  --album-canvas:#ffffff;     /* album overlay becomes light */
  --album-ink:#0e0f11;
  --album-muted:#6e7481;
  --album-border:#e7ecf4;

  --veil: rgba(0,0,0,.65);
  --focus-ring: 0 0 0 4px rgba(120,170,255,.18);

  color-scheme: light;
  background:var(--bg);
  color:var(--ink);
}
body.is-dark{
  --bg:#0b0d12;
  --ink:#eaf0ff;
  --muted:#a9b4c7;
  --ring:rgba(120,170,255,.35);

  --card:#0f141c;
  --card-2:#0c1118;
  --hair:rgba(255,255,255,.08);

  --album-canvas:#0b0d12;     /* rich dark overlay */
  --album-ink:#eaf0ff;
  --album-muted:#a9b4c7;
  --album-border:#1b2532;

  --veil: rgba(0,0,0,.78);
  --focus-ring: 0 0 0 4px rgba(120,170,255,.22);

  color-scheme: dark;
  background:var(--bg);
  color:var(--ink);
}

/* ==========================================================
   BASE
   ========================================================== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
body.noscroll{overflow:hidden}

/* ==========================================================
   TOP BAR
   ========================================================== */
.topbar{
  position:sticky; top:0; z-index:40;
  display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px;
  padding:14px clamp(16px,3vw,28px);
  background:rgba(255,255,255,.86);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--hair);
}
body.is-dark .topbar{ background:rgba(10,12,18,.72); }
.brand{
  font-family:'Orbitron',monospace; font-weight:700;
  color:var(--ink); text-decoration:none;
}
.brand:hover{text-decoration:underline}
.center-title{
  font-family:'Orbitron',monospace;
  font-size:clamp(20px,2.4vw,30px);
  margin:0; justify-self:center;
}
.spacer{height:1px}

/* ==========================================================
   HERO (outside)
   ========================================================== */
.hero{padding:10px 0 0}
.hero-media{
  position:relative; overflow:hidden; border-radius:18px;
  margin:0 auto; width:min(1200px,95vw); aspect-ratio:16/6;
  border:1px solid var(--hair);
  box-shadow:0 10px 40px rgba(0,0,0,.08);
}
.hero-media img{width:100%;height:100%;object-fit:cover;display:block}
.hero-overlay{position:absolute; inset:0; background:linear-gradient(180deg,transparent 40%,rgba(255,255,255,.92))}
body.is-dark .hero-overlay{ background:linear-gradient(180deg,transparent 40%,rgba(0,0,0,.55)); }
.hero-text{position:absolute; left:5%; right:5%; bottom:6%; text-align:center}
.hero-text h2{
  margin:0 0 8px; font-family:'Orbitron',monospace;
  font-size:clamp(28px,3.2vw,44px)
}
.hero-text p{margin:0; color:var(--muted); font-weight:500}

/* crisp desktop colors for title */
@media (min-width:1025px){
  body.is-light .hero-text h2{ color:#0a0a0a !important; }
  body.is-dark  .hero-text h2{ color:#ffffff !important; }
}

/* ==========================================================
   CONTAINERS / SEARCH
   ========================================================== */
.container{width:min(1200px,95vw); margin:24px auto}
.controls .search{
  display:flex; align-items:center; gap:10px;
  padding:12px 14px; border-radius:14px;
  border:1px solid var(--hair); background:var(--card);
  box-shadow:0 6px 20px rgba(20,40,60,.05);
}
body.is-dark .controls .search{ box-shadow:0 10px 30px rgba(0,0,0,.28); }
.controls .search input{
  width:100%; border:0; outline:0; font-size:16px; background:transparent; color:var(--ink);
}
.controls .search i{color:#9aa3b2}
.controls .search:focus-within{
  border-color:#78aaff; box-shadow:var(--focus-ring);
}

/* tip (desktop only; ash/blue tone) */
.search-tip{ margin-left:auto; font-size:.96rem; }
.search-tip .kicker{ font-weight:800; }
@media (min-width:1025px){
  body.is-dark  .search-tip{ color:#9FB0C2; opacity:.96; }
  body.is-dark  .search-tip .kicker{ color:#C7D2DE; }
  body.is-light .search-tip{ color:#6B7785; opacity:.95; }
  body.is-light .search-tip .kicker{ color:#505A66; }
}
@media (max-width:1024px){ .search-tip{ display:none !important; } }

/* ==========================================================
   ALBUM GRID (outside)
   ========================================================== */
#albumGrid{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:18px;
}
.card{
  position:relative; overflow:hidden; border-radius:18px; cursor:pointer;
  background:var(--card); border:1px solid var(--hair);
  box-shadow:0 10px 30px rgba(30,40,60,.08);
  transition:transform .25s ease, box-shadow .25s ease, border-color .2s ease;
}
.card:hover{transform:translateY(-6px); box-shadow:0 16px 50px rgba(20,50,90,.12); border-color:rgba(120,170,255,.35)}
body.is-dark .card{ box-shadow:0 12px 32px rgba(0,0,0,.45); }
.card img{width:100%; height:200px; object-fit:cover; display:block}
.card .label{padding:12px 14px; border-top:1px solid var(--hair); background:transparent}
.card .title{font-weight:700; color:var(--ink)}
.badge-video{
  position:absolute; top:10px; right:10px;
  width:34px; height:34px; border-radius:50%;
  display:grid; place-items:center; color:#fff;
  background:rgba(8,10,16,.66); border:1px solid var(--ring);
  box-shadow:0 6px 16px rgba(4,112,255,.25);
}

/* ==========================================================
   INSIDE ALBUM (overlay) — now fully theming
   ========================================================== */
#albumView{
  position:fixed; inset:0; z-index:80;
  display:none; overflow:auto;
  background: var(--album-canvas);
  color: var(--album-ink);
}
#albumView.active{display:block}
.close-btn{
  position:sticky; top:12px; float:right; margin:12px; z-index:10;
  border:1px solid var(--album-border); background:linear-gradient(180deg,var(--card),var(--card-2));
  color:var(--ink); padding:10px 12px; border-radius:12px; cursor:pointer;
  box-shadow:0 6px 18px rgba(0,0,0,.2);
}
body.is-dark .close-btn{ background:#101317; color:#fff; border-color:#20252d }

/* Banner */
.album-hero.slim{
  position:relative; display:block;
  width:min(1400px,96vw); margin:6px auto 0;
  border-radius:18px; overflow:hidden; border:1px solid var(--album-border);
  aspect-ratio:21/7;
  background: #000;
}
.album-hero img{width:100%;height:100%;object-fit:cover;display:block}
.album-hero-overlay{position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,0) 60%,rgba(0,0,0,.55))}
body.is-light .album-hero-overlay{ background:linear-gradient(180deg,rgba(255,255,255,0) 60%, rgba(255,255,255,.65)); }
.album-hero h2{
  position:absolute; left:4vw; bottom:1.4vw; margin:0;
  font-family:'Orbitron',monospace; font-weight:700;
  font-size:clamp(28px,8vw,120px); color:#fff; line-height:.9; letter-spacing:1px;
}
body.is-light #albumView .album-hero h2{ color:#0e0f11; text-shadow:0 1px 18px rgba(255,255,255,.35); }

/* Description */
.album-desc-block{padding:40px 0 26px; background:transparent; color:var(--album-ink)}
.album-desc-inner{
  width:min(1100px,88vw); margin:0 auto;
  font-weight:300; font-size:clamp(16px,2.1vw,28px); line-height:1.45;
  text-align:center; color:var(--album-muted);
}

/* Masonry */
.album-media{padding:4px 0 30px; width:min(1100px,96vw); margin:0 auto;}
.masonry{column-count:3; column-gap:16px; -webkit-column-gap:16px; -webkit-column-fill:balance; column-fill:balance}
@media (max-width:1100px){.masonry{column-count:2}}
@media (max-width:640px){.masonry{column-count:1}}
.m-item{
  break-inside:avoid; -webkit-column-break-inside:avoid; -moz-column-break-inside:avoid;
  margin-bottom:16px; position:relative; cursor:pointer;
  border-radius:14px; overflow:hidden; border:1px solid var(--album-border);
  box-shadow:0 8px 24px rgba(0,0,0,.35); display:block; min-height:10px;
  background:#000; /* safe fallback for media */
}
body.is-light .m-item{ background:#fff; box-shadow:0 10px 26px rgba(17,23,32,.08); }
.m-item img{width:100%; height:auto; display:block}
.m-item .play{
  position:absolute; right:10px; bottom:10px;
  width:38px; height:38px; display:grid; place-items:center;
  color:#fff; background:rgba(0,0,0,.6);
  border:1px solid rgba(255,255,255,.12); border-radius:50%;
}
body.is-light .m-item .play{ background:rgba(10,12,16,.55); border-color:rgba(0,0,0,.15) }

/* ==========================================================
   VIEWER (lightbox) — themed
   ========================================================== */
#viewerOverlay{
  position:fixed; inset:0; z-index:120;
  display:none; place-items:center;
  background:var(--veil); backdrop-filter:blur(6px);
}
#viewerOverlay.active{display:grid}

.viewer-shell{position:relative; width:min(1200px,95vw)}
.stage{
  margin:0; position:relative; overflow:hidden; width:100%;
  min-height:60vh; max-height:84vh;
  border-radius:18px; border:1px solid var(--album-border);
  box-shadow:0 30px 120px rgba(0,0,0,.55),
             0 0 0 6px rgba(56,231,171,.20),
             0 0 0 12px rgba(4,112,255,.18);
  background: var(--album-canvas);
  display:grid; place-items:center;
}
.stage img,.stage video,.stage iframe{
  width:100% !important; height:100% !important;
  object-fit:contain; background:var(--album-canvas); display:block; border:0;
}
.viewer-close{
  position:absolute; top:10px; right:10px; z-index:2;
  border:1px solid var(--album-border);
  background:linear-gradient(180deg,var(--card),var(--card-2));
  color:var(--ink); padding:8px 10px; border-radius:10px; cursor:pointer;
}
body.is-dark .viewer-close{ background:#111827; color:#fff; }
.nav{
  position:absolute; top:50%; transform:translateY(-50%);
  border:1px solid var(--album-border);
  background:rgba(10,12,16,.75); color:#fff;
  width:46px; height:46px; border-radius:50%; cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.35);
}
body.is-light .nav{ background:rgba(20,22,28,.72); color:#fff; }

.peek{
  position:absolute; bottom:-70px; width:110px; height:70px;
  border:2px solid rgba(4,112,255,.35); border-radius:10px;
  object-fit:cover; opacity:.9; filter:grayscale(.1) saturate(1.1);
}
.peek-left{left:10px} .peek-right{right:10px}
.hint{color:var(--album-muted); font-size:12px; margin:10px auto 0; text-align:center}

/* ==========================================================
   RESPONSIVE TWEAKS
   ========================================================== */
@media (max-width:720px){
  .album-hero.slim{aspect-ratio:21/10}
  .peek{display:none}
  .viewer-shell{width:min(1000px,96vw)}
  .stage{max-height:78vh}
}

/* ==========================================================
   FOOTER (main + inside albums)
   ========================================================== */
.site-footer{
  --accent:#f1b32a;
  background:linear-gradient(180deg,#0d0e10 0%, #0f1012 100%);
  color:#e9eef5;
  border-top:1px solid var(--hair);
  padding:18px clamp(18px,4vw,28px);

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;

  line-height:1.4;
  font-weight:500;
  box-shadow:0 -1px 0 rgba(0,0,0,.35) inset;
  border-bottom-left-radius:10px;
  border-bottom-right-radius:10px;
}
body.is-light .site-footer{
  background: linear-gradient(180deg,#ffffff 0%, #f7f9fc 100%);
  color:#20242c;
}
.site-footer .footer-left,
.site-footer .footer-right{ display:inline-flex; align-items:center; }
.site-footer .footer-left{ white-space:nowrap }
.site-footer .footer-name, .site-footer a{
  color:var(--accent); text-decoration:underline; text-underline-offset:3px; font-weight:600;
}
.site-footer .footer-right{
  margin-left:auto; text-align:right; color:var(--accent); font-weight:600; letter-spacing:.2px;
}
#albumView .site-footer{
  width:min(1200px,95vw); margin:28px auto 44px; position:relative; z-index:1; border-radius:10px;
}
@media (max-width:600px){
  .site-footer{ flex-direction:column; text-align:center; gap:6px; }
  .site-footer .footer-right{ margin-left:0; text-align:center; }
}
/* Final enforce */
.site-footer{ width:100% !important; display:flex !important; align-items:center !important; justify-content:space-between !important; padding:18px clamp(18px,4vw,28px); }
.site-footer .footer-left{ flex:1 1 auto; white-space:nowrap; display:inline-flex; align-items:center; }
.site-footer .footer-right{ margin-left:auto; text-align:right; display:inline-flex; align-items:center; }
#albumView .site-footer{ width:100% !important; margin:28px 0 44px !important; border-radius:0 !important; }

/* ==========================================================
   MISC + EXISTING COMPONENT POLISH
   ========================================================== */
.hero .word{ display:inline-block; will-change:transform }

.lazy-cover{ filter:blur(14px); transform:scale(1.02); transition:filter .35s, transform .35s }
.lazy-cover.is-loaded{ filter:blur(0); transform:scale(1) }

.tag-chips{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 0 }
.chip{ border:1px solid var(--hair); background:var(--card); border-radius:999px; padding:6px 10px; cursor:pointer; transition: transform .12s ease, box-shadow .2s ease, background .2s ease; }
.chip:hover{ background:var(--card-2); transform:translateY(-1px); box-shadow:0 8px 20px rgba(0,0,0,.12) }

@media (prefers-reduced-motion: reduce){
  * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition: none !important; }
}

/* Album ask block */
.album-ask { margin-top: 8px; }
.album-ask .ask-row{
  display:flex; gap:10px; align-items:center;
  padding:10px; border:1px solid var(--album-border); border-radius:12px;
  background: linear-gradient(180deg,var(--card),var(--card-2));
  box-shadow:0 6px 20px rgba(0,0,0,.1);
}
body.is-dark .album-ask .ask-row{ background:#0b0b0b; border-color:#1b1b1b; box-shadow:0 6px 20px rgba(0,0,0,.25); }
.album-ask input{
  flex:1; border:0; outline:0; background:transparent; color:var(--ink);
  font-size:16px; padding:10px 8px;
}
body.is-dark .album-ask input{ color:#e9eef5; }
.album-ask .ask-btn{
  border:1px solid var(--album-border); border-radius:10px; padding:10px 14px; cursor:pointer;
  background:linear-gradient(180deg,var(--card),var(--card-2)); color:var(--ink); font-weight:600;
}
body.is-dark .album-ask .ask-btn{ background:#1f2937; color:#fff; border-color:#2a3442 }
.album-ask .ask-btn:disabled{ opacity:.6; cursor:not-allowed }
.album-ask .ask-result{ margin-top:10px; color:var(--album-muted); line-height:1.5; white-space:pre-wrap; }

button:focus-visible { outline: 2px solid #f1b32a; outline-offset: 2px; }

/* mini tags on cards */
.mini-tags{ position:absolute; left:8px; bottom:8px; display:flex; gap:6px; flex-wrap:wrap; }
.mini-chip{
  padding:4px 8px; font-size:12px;
  background:rgba(0,0,0,.55); color:#fff;
  border:1px solid rgba(255,255,255,.15);
  border-radius:999px; backdrop-filter: blur(2px);
}

/* Mobile search bar convenience */
@media (max-width: 768px) {
  .search-bar-container { display:flex; flex-direction:column; align-items:center; padding:0 10px; }
  .search-bar-container input[type="text"],
  .search-slot input#searchInput{
    width:90% !important; max-width:350px; font-size:14px; border-radius:8px; padding:8px 12px; box-sizing:border-box;
    background:var(--card); color:var(--ink); border:1px solid var(--hair);
  }
  .search-bar-container button{ margin-top:8px; width:auto; max-width:120px; }
}

/* Album toolbar on mobile/tablet */
@media (max-width: 1024px){
  .album-toolbar{ display:flex; align-items:center; gap:10px; width:100%; min-height:44px; }
  .chips-scroll{
    display:flex; gap:8px; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; padding-bottom:4px; flex:1 1 50%;
    mask-image: linear-gradient(to right, transparent, #000 12px, #000 calc(100% - 12px), transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, #000 12px, #000 calc(100% - 12px), transparent);
    scroll-snap-type:x proximity;
  }
  .chips-scroll > *{ scroll-snap-align:center; }
  .chips-scroll::-webkit-scrollbar{ display:none; }
  .search-slot{ flex:0 1 50%; min-width:180px; display:flex; }
  .search-slot input{ width:100%; box-sizing:border-box; font-size:14px; padding:9px 12px; border-radius:10px; }
  #ask-hint-row.ask-hint-compact{
    display:flex; justify-content:center; margin:8px auto 2px; max-width:min(840px,96%);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px dashed rgba(158,193,255,.55);
    border-radius:999px; padding:8px 12px; font-size:13px;
    color:rgba(230,240,255,.92); backdrop-filter: blur(4px);
  }
  #ask-hint-row.ask-hint-compact em{ font-style: italic; opacity:.95; white-space: nowrap; }
}

/* phone landscape adjustments */
@media (max-height: 500px) and (max-width: 900px) and (orientation: landscape){
  .album-media{ width:min(1000px,94vw); }
  .masonry{ column-count:2; }
}
@media (max-height: 420px) and (orientation: landscape){
  .masonry{ column-count:1; }
}

/* Footer center on portrait tablets/phones */
@media (max-width: 1024px) and (orientation: portrait) {
  body .site-footer{ display:flex !important; flex-direction:column !important; align-items:center !important; justify-content:center !important; text-align:center !important; gap:10px !important; }
  body .site-footer .footer-left,
  body .site-footer .footer-right{ width:100% !important; margin:0 !important; display:inline-flex !important; align-items:center !important; justify-content:center !important; text-align:center !important; }
  body .site-footer .footer-right{ margin-left:0 !important; }
}
